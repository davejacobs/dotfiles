#!/bin/bash

# Initial setup script
# This script will setup a Mac (running Yosemite)
# from scratch. This is probably only useful for @davejacobs, but feel free to co-opt it for yourself.

set -e

declare email
read -p "What is your email address?" email

# Generate SSH key
ssh-keygen -t rsa -C "$email" -N "" -f ~/.ssh/id_rsa
pbcopy < ~/.ssh/id_rsa.pub 

echo "+ Public key has been copied to your clipboard."

# Stop annoying Apple behavior
defaults write -g ApplePressAndHoldEnabled -bool false

# Install GCC
xcode-select --install

# Install Homebrew
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

# Install deps
brew install tmux
brew install ruby-build
brew install rbenv
brew install rbenv-gemset
brew install python
brew install ack
brew install pup
brew install jq

brew install caskroom/cask/brew-cask

# Install free GUI apps
brew cask install iterm2
brew cask install alfred
brew cask install macvim
brew cask install google-chrome
brew cask install limechat
brew cask install scroll-reverser

# Install paid GUI apps
brew cask install jumpcut
brew cask install hipchat
brew cask install fluid
brew cask install divvy

pushd /tmp &> /dev/null
  curl http://font.ubuntu.com/download/ubuntu-font-family-0.80.zip \
    -o fonts.zip
  unzip fonts.zip
  cd fonts
  mv *.ttf ~/Library/Fonts

  curl https://github.com/mbadolato/iTerm2-Color-Schemes/zipball/master \
    -o iterm-themes.zip
  unzip iterm-themes.zip
  pushd iterm2-color-schemes &> /dev/null
    for f in *; do
      theme=$(basename "$f")
      defaults write \
        -app iTerm "Custom Color Presets" \
        -dict-add "$theme" "$(cat "$f")"
    done
  popd &> /dev/null

  git clone git@github.com:jschoolcraft/Limechat-Themes.git
  pushd Limechat-Themes &> /dev/null
    rake themes:init
    rake themes:install
  popd &> /dev/null
popd &> /dev/null

see ~/Library

echo "Reminders:"
echo "- Set up FileVault"
echo "- Remove entries from the sidebar"
echo "- Install powerline fonts"
echo "- Install and set up mail app"
echo "- Install Taskpaper, Mail"
echo "- Change terminal font"
echo "- Make option key work for CLI navigation"
echo "- Cursor -> vertical bar"
echo "- Change default view to column view"
echo "- Configure themes for Atom, Taskpaper, etc."
